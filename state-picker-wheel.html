<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>State Picker Wheel - Random US State Generator</title>
    <meta name="description"
        content="Spin the State Picker Wheel to pick a random US state. Useful for geography learning, travel planning, and games.">
    <meta name="keywords"
        content="state picker wheel, random state generator, us state picker, 50 states wheel, geography spinner">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://ipickerwheel.com/state-picker-wheel.html">
    <meta property="og:title" content="State Picker Wheel - Random US State Generator">
    <meta property="og:description" content="Spin the State Picker Wheel to pick a random US state.">
    <meta property="og:image" content="https://ipickerwheel.com/images/og-state.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://ipickerwheel.com/state-picker-wheel.html">
    <meta property="twitter:title" content="State Picker Wheel - Random US State Generator">
    <meta property="twitter:description" content="Spin the State Picker Wheel to pick a random US state.">
    <meta property="twitter:image" content="https://ipickerwheel.com/images/og-state.png">

    <!-- Canonical -->
    <link rel="canonical" href="https://ipickerwheel.com/state-picker-wheel.html">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/advanced-settings.css">
    <link rel="stylesheet" href="css/button-animations.css">
    <style>
        .state-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 10px;
            border-bottom: 1px solid #f5f5f5;
        }

        .state-list {
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid #eee;
            border-radius: 6px;
        }

        .state-code {
            background: #f3f4f6;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: 600;
            font-size: 0.85rem;
        }
    </style>
</head>

<body>
    <header>
        <div class="container header-inner">
            <a href="index.html" class="logo">
                <div class="logo-icon">üó∫Ô∏è</div>
                <div class="logo-text">State Picker Wheel<span>Random State Generator</span></div>
            </a>
            <div class="nav-icons">
                <button class="nav-btn" id="header-dark-mode-toggle" title="Toggle Dark Mode">
                    <span class="nav-icon">üåô</span>
                    <span class="nav-label">Theme</span>
                </button>
                <button class="nav-btn" id="switch-wheel-btn" title="Switch Wheel">
                    <span class="nav-icon">üîÑ</span>
                    <span class="nav-label">Switch</span>
                </button>
                <button class="nav-btn" id="file-btn" title="File">
                    <span class="nav-icon">üìÅ</span>
                    <span class="nav-label">File</span>
                </button>
                <button class="nav-btn" id="settings-nav-btn" title="Settings">
                    <span class="nav-icon">‚öôÔ∏è</span>
                    <span class="nav-label">Settings</span>
                </button>
                <button class="nav-btn" id="share-btn" title="Share">
                    <span class="nav-icon">üîó</span>
                    <span class="nav-label">Share</span>
                </button>
                <button class="nav-btn" id="tools-btn" title="Tools">
                    <span class="nav-icon">üõ†Ô∏è</span>
                    <span class="nav-label">Tools</span>
                </button>
            </div>
        </div>
    </header>

    <main class="container hero">
        <div class="hero-grid">
            <div class="wheel-section">
                <div class="wheel-container">
                    <div id="spin-count-badge" class="spin-count-badge" style="display:none;">
                        <span class="badge-label">SPINS</span>
                        <span id="total-spins" class="badge-value">0</span>
                    </div>
                    <div class="wheel-pointer"></div>
                    <canvas id="wheel-canvas"></canvas>
                    <div class="spin-btn-container">
                        <button id="spin-btn" class="spin-btn pulse">SPIN</button>
                    </div>
                    <button id="manual-stop-btn" class="manual-stop-btn">STOP</button>
                </div>
            </div>

            <div class="inputs-section">
                <div class="inputs-card">
                    <div class="inputs-header">
                        <h3>üó∫Ô∏è Select Region</h3>
                        <span id="state-count">50 states</span>
                    </div>

                    <div style="margin-bottom: 15px;">
                        <label>Country/Region:</label>
                        <select id="country-select" class="main-input" style="width:100%">
                            <option value="us">United States (50 States)</option>
                            <option value="uk">United Kingdom (12 Regions)</option>
                            <option value="ca">Canada (13 Provinces)</option>
                            <option value="au">Australia (8 States)</option>
                            <option value="de">Germany (16 L√§nder)</option>
                        </select>
                    </div>

                    <div id="state-list" class="state-list"></div>
                </div>
            </div>
        </div>

        <!-- ADVANCED SETTINGS PANEL -->
        <div class="settings-section">
            <button class="settings-toggle" id="advanced-settings-toggle">
                <span>‚öôÔ∏è Advanced Tool Settings</span>
                <span id="advanced-toggle-arrow" class="toggle-arrow">‚ñ≤</span>
            </button>
            <div class="settings-panel open" id="advanced-settings-panel">

                <!-- General Category -->
                <div class="settings-category">
                    <div class="category-header" data-category="general">
                        <h4>‚öôÔ∏è General Settings</h4>
                        <span class="category-arrow">‚ñ≤</span>
                    </div>
                    <div class="category-content open">
                        <div class="setting-row">
                            <div class="setting-label">üåô Dark Mode</div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="dark-mode-toggle">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Spin Behavior Category -->
                <div class="settings-category">
                    <div class="category-header" data-category="spin-behavior">
                        <h4>üéØ Spin Behavior</h4>
                        <span class="category-arrow">‚ñ≤</span>
                    </div>
                    <div class="category-content open">
                        <div class="setting-row">
                            <div>
                                <div class="setting-label">Spinning Speed Level</div>
                                <div class="setting-description">Lvl1 (Slow) to Lvl10 (Fast)</div>
                            </div>
                            <div class="range-container" style="width:200px;">
                                <input type="range" id="speed-level" min="1" max="10" value="5">
                                <span class="range-value" id="speed-level-value">5</span>
                            </div>
                        </div>

                        <div class="setting-row">
                            <div>
                                <div class="setting-label">Spinning Duration</div>
                                <div class="setting-description">1s to 30s animation</div>
                            </div>
                            <div class="range-container" style="width:200px;">
                                <input type="range" id="adv-spin-duration" min="1" max="30" value="4">
                                <span class="range-value" id="adv-duration-value">4s</span>
                            </div>
                        </div>

                        <div class="setting-row">
                            <div>
                                <div class="setting-label">Manual Stop Button</div>
                                <div class="setting-description">Click button to stop manually</div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="manual-stop-toggle">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>

                        <div class="setting-row">
                            <div>
                                <div class="setting-label">Mystery Spin</div>
                                <div class="setting-description">Replace names with "?" during spin</div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="mystery-spin-toggle">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>

                        <div class="setting-row">
                            <div>
                                <div class="setting-label">Spin Count</div>
                                <div class="setting-description">Track total number of spins</div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="spin-count-toggle">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>

                        <div class="setting-row">
                            <div>
                                <div class="setting-label">Random Initial Angle</div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="random-angle-toggle" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>

                        <div class="setting-row">
                            <div>
                                <div class="setting-label">Initial Spinning</div>
                                <div class="setting-description">Wheel rotates slowly on load</div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="initial-spin-toggle">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Confetti & Sound Category -->
                <div class="settings-category">
                    <div class="category-header" data-category="confetti-sound">
                        <h4>üéä Confetti & Sound</h4>
                        <span class="category-arrow">‚ñº</span>
                    </div>
                    <div class="category-content">
                        <div class="setting-row">
                            <div class="setting-label">Confetti on Win</div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="adv-confetti-toggle" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>

                        <div class="setting-row">
                            <div class="setting-label">Sound Effects</div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="adv-sound-toggle" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>

                        <div class="setting-row" style="flex-direction:column; align-items:stretch; gap:10px;">
                            <div class="setting-label">Custom Sounds (Premium User)</div>
                            <div style="display:grid; gap:8px;">
                                <div class="sub-setting">
                                    <label style="font-size:0.75rem;">Start Sound URL</label>
                                    <input type="text" id="sound-start-url" placeholder="URL to start audio..."
                                        class="main-input" style="padding:4px; font-size:0.75rem;">
                                </div>
                                <div class="sub-setting">
                                    <label style="font-size:0.75rem;">Spinning Sound URL</label>
                                    <input type="text" id="sound-spin-url" placeholder="URL to tick audio..."
                                        class="main-input" style="padding:4px; font-size:0.75rem;">
                                </div>
                                <div class="sub-setting">
                                    <label style="font-size:0.75rem;">End (Win) Sound URL</label>
                                    <input type="text" id="sound-win-url" placeholder="URL to win audio..."
                                        class="main-input" style="padding:4px; font-size:0.75rem;">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tool Colors Category -->
                <div class="settings-category">
                    <div class="category-header" data-category="tool-colors">
                        <h4>üé® Tool Colors & Themes</h4>
                        <span class="category-arrow">‚ñº</span>
                    </div>
                    <div class="category-content">
                        <div class="setting-row" style="flex-direction:column; align-items:stretch;">
                            <div class="setting-label" style="margin-bottom:8px;">Theme Presets</div>
                            <div class="theme-grid"
                                style="display:grid; grid-template-columns: repeat(2, 1fr); gap:10px;">
                                <button class="theme-btn" data-theme="vibrant"
                                    style="background: linear-gradient(90deg, #f43f5e, #fbbf24, #10b981);">Vibrant</button>
                                <button class="theme-btn" data-theme="ocean"
                                    style="background: linear-gradient(90deg, #0ea5e9, #3b82f6, #6366f1);">Ocean
                                    Blue</button>
                                <button class="theme-btn" data-theme="sunset"
                                    style="background: linear-gradient(90deg, #f97316, #fb923c, #fcd34d);">Sunset</button>
                                <button class="theme-btn" data-theme="nature"
                                    style="background: linear-gradient(90deg, #16a34a, #22c55e, #86efac);">Nature</button>
                                <button class="theme-btn" data-theme="pastel"
                                    style="background: linear-gradient(90deg, #fda4af, #fde68a, #a7f3d0);">Pastel
                                    Soft</button>
                                <button class="theme-btn" data-theme="monochrome"
                                    style="background: linear-gradient(90deg, #333, #777, #ccc);">Monochrome</button>
                            </div>
                        </div>
                        <div class="setting-row" style="margin-top:15px; border-top:1px solid #eee; padding-top:10px;">
                            <div class="setting-label">Custom Palette (Premium)</div>
                            <div id="color-palette" style="display:flex; gap:6px; flex-wrap:wrap; margin-top:8px;">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Basic Appearance Category -->
                <div class="settings-category">
                    <div class="category-header" data-category="appearance">
                        <h4>üìê Basic Appearance</h4>
                        <span class="category-arrow">‚ñº</span>
                    </div>
                    <div class="category-content">
                        <div class="setting-row">
                            <div class="setting-item" style="width:100%;">
                                <label class="setting-label">Center Image</label>
                                <div style="display:flex; gap:5px; margin-top:8px;">
                                    <input type="text" id="center-image-url" placeholder="Image URL..."
                                        class="main-input" style="padding:8px; font-size:0.8rem; flex:1;">
                                    <button id="center-image-file-btn" class="nav-btn" title="Upload"
                                        style="padding:8px 12px;">üìÅ</button>
                                    <button id="center-image-clear-btn" class="nav-btn" title="Clear"
                                        style="padding:8px 12px; color:red;">‚úï</button>
                                </div>
                            </div>
                        </div>

                        <div class="setting-row">
                            <div class="setting-item" style="width:100%;">
                                <label class="setting-label">Font Style</label>
                                <div style="display:flex; gap:8px; align-items:center; margin-top:8px;">
                                    <select id="font-family" class="main-input"
                                        style="padding:8px; font-size:0.8rem; flex:1;">
                                        <option value="Inter, sans-serif">Inter</option>
                                        <option value="Arial, sans-serif">Arial</option>
                                        <option value="'Courier New', monospace">Courier</option>
                                        <option value="'Times New Roman', serif">Serif</option>
                                        <option value="Impact, sans-serif">Impact</option>
                                        <option value="'Comic Sans MS', cursive">Comic Sans</option>
                                    </select>
                                    <input type="color" id="font-color" value="#333333"
                                        style="height:38px; width:40px; cursor:pointer; border:none; background:none; padding:0;">
                                </div>
                            </div>
                        </div>

                        <div class="setting-row">
                            <div style="width:100%;">
                                <div class="setting-label">Font Size</div>
                                <div class="range-container" style="margin-top:8px;">
                                    <span class="range-label">S</span>
                                    <input type="range" id="font-size" min="10" max="40" value="16" style="flex:1;">
                                    <span class="range-label">L</span>
                                </div>
                            </div>
                        </div>

                        <div class="setting-row">
                            <div style="width:100%;">
                                <div class="setting-label">Border Thickness</div>
                                <div class="range-container" style="margin-top:8px;">
                                    <span class="range-label">0</span>
                                    <input type="range" id="border-width" min="0" max="10" value="1" style="flex:1;">
                                    <span class="range-label">10</span>
                                </div>
                            </div>
                        </div>

                        <div class="setting-row">
                            <div style="width:100%;">
                                <div class="setting-label">Pointer Colors</div>
                                <div style="display:flex; align-items:center; gap:10px; margin-top:8px;">
                                    <input type="color" id="pointer-color" value="#ffffff"
                                        style="height:35px; width:35px; border:none; background:none; cursor:pointer;">
                                    <span class="range-label" style="font-size:0.75rem;">Outer</span>
                                    <input type="color" id="pointer-center-color" value="#fbbf24"
                                        style="height:35px; width:35px; border:none; background:none; cursor:pointer;">
                                    <span class="range-label" style="font-size:0.75rem;">Inner</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Background Category -->
                <div class="settings-category">
                    <div class="category-header" data-category="background">
                        <h4>üñºÔ∏è Background Customization</h4>
                        <span class="category-arrow">‚ñº</span>
                    </div>
                    <div class="category-content">
                        <div class="background-tabs">
                            <button class="bg-tab active" data-tab="color">Color</button>
                            <button class="bg-tab" data-tab="image">Image (PM)</button>
                            <button class="bg-tab" data-tab="gradient">Gradient (PM)</button>
                        </div>

                        <div class="bg-panel active" id="bg-color-panel">
                            <div class="setting-row">
                                <div class="setting-label">Section Background Color</div>
                                <input type="color" id="bg-color" value="#ffffff"
                                    style="height:40px; width:80px; cursor:pointer; border:none; background:none;">
                            </div>
                        </div>

                        <div class="bg-panel" id="bg-image-panel">
                            <div class="setting-row" style="flex-direction:column; align-items:stretch;">
                                <div class="setting-label" style="margin-bottom:8px;">Background Image URL (Premium)
                                </div>
                                <div style="display:flex; gap:5px;">
                                    <input type="text" id="bg-image-url" placeholder="Enter image URL..."
                                        class="main-input" style="padding:8px; flex:1;">
                                    <button id="bg-image-upload" class="nav-btn" title="Upload">üìÅ</button>
                                </div>
                            </div>
                        </div>

                        <div class="bg-panel" id="bg-gradient-panel">
                            <div class="setting-row">
                                <div class="setting-label">Start Color</div>
                                <input type="color" id="gradient-start" value="#667eea"
                                    style="height:40px; width:40px; cursor:pointer; border:none; background:none;">
                                <div class="setting-label">End Color</div>
                                <input type="color" id="gradient-end" value="#764ba2"
                                    style="height:40px; width:40px; cursor:pointer; border:none; background:none;">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Spin Button Category -->
                <div class="settings-category">
                    <div class="category-header" data-category="spin-button">
                        <h4>üîò Custom Spin Button (Premium)</h4>
                        <span class="category-arrow">‚ñº</span>
                    </div>
                    <div class="category-content">
                        <div class="setting-row" style="flex-direction:column; align-items:stretch;">
                            <div class="setting-label" style="margin-bottom:8px;">Button Color & Style</div>
                            <div class="button-color-grid">
                                <div class="color-option selected" data-color="gradient(#fbbf24, #f59e0b)"
                                    style="background:linear-gradient(135deg, #fbbf24, #f59e0b);"></div>
                                <div class="color-option" data-color="gradient(#6366f1, #4f46e5)"
                                    style="background:linear-gradient(135deg, #6366f1, #4f46e5);"></div>
                                <div class="color-option" data-color="gradient(#10b981, #059669)"
                                    style="background:linear-gradient(135deg, #10b981, #059669);"></div>
                                <div class="color-option" data-color="gradient(#ef4444, #dc2626)"
                                    style="background:linear-gradient(135deg, #ef4444, #dc2626);"></div>
                                <div class="color-option" data-color="gradient(#ec4899, #db2777)"
                                    style="background:linear-gradient(135deg, #ec4899, #db2777);"></div>
                                <div class="color-option" data-color="gradient(#8b5cf6, #7c3aed)"
                                    style="background:linear-gradient(135deg, #8b5cf6, #7c3aed);"></div>
                                <div class="color-option" data-color="#000000" style="background:#000000;"></div>
                                <div class="color-option" data-color="#ffffff"
                                    style="background:#ffffff; border:1px solid #ddd;"></div>
                            </div>
                        </div>

                        <div class="setting-row" style="flex-direction:column; align-items:stretch; margin-top:10px;">
                            <div class="setting-label" style="margin-bottom:8px;">Spin Button Animation</div>
                            <div class="animation-grid">
                                <div class="animation-option selected" data-animation="pulse">Pulse</div>
                                <div class="animation-option" data-animation="bounce">Bounce</div>
                                <div class="animation-option" data-animation="spin">Spin</div>
                                <div class="animation-option" data-animation="glow">Glow</div>
                                <div class="animation-option" data-animation="shake">Shake</div>
                                <div class="animation-option" data-animation="none">None</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Banner/Logo Category -->
                <div class="settings-category">
                    <div class="category-header" data-category="banner">
                        <h4>üè∑Ô∏è Custom Banner | Logo (Premium)</h4>
                        <span class="category-arrow">‚ñº</span>
                    </div>
                    <div class="category-content">
                        <div class="setting-row">
                            <div class="setting-label">Show Banner/Header</div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="banner-toggle" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>

                        <div class="setting-row" style="flex-direction:column; align-items:stretch;">
                            <div class="setting-label" style="margin-bottom:8px;">Custom Logo URL</div>
                            <input type="text" id="logo-url" placeholder="URL to your logo..." class="main-input"
                                style="padding:8px;">
                        </div>

                        <div class="setting-row" style="flex-direction:column; align-items:stretch;">
                            <div class="setting-label" style="margin-bottom:8px;">Custom Banner Text</div>
                            <input type="text" id="banner-text" placeholder="Enter custom title..." class="main-input"
                                style="padding:8px;">
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </main>

    <footer>
        <div class="container" style="text-align:center;">&copy; 2026 I Picker Wheel. All rights reserved.</div>
    </footer>

    <script src="js/utils.js"></script>
    <script src="js/wheel-engine.js"></script>
    <script src="js/navigation.js"></script>
    <script src="js/advanced-settings.js"></script>
    <script>
        const stateData = {
            us: [
                { name: 'Alabama', code: 'AL' }, { name: 'Alaska', code: 'AK' }, { name: 'Arizona', code: 'AZ' },
                { name: 'Arkansas', code: 'AR' }, { name: 'California', code: 'CA' }, { name: 'Colorado', code: 'CO' },
                { name: 'Connecticut', code: 'CT' }, { name: 'Delaware', code: 'DE' }, { name: 'Florida', code: 'FL' },
                { name: 'Georgia', code: 'GA' }, { name: 'Hawaii', code: 'HI' }, { name: 'Idaho', code: 'ID' },
                { name: 'Illinois', code: 'IL' }, { name: 'Indiana', code: 'IN' }, { name: 'Iowa', code: 'IA' },
                { name: 'Kansas', code: 'KS' }, { name: 'Kentucky', code: 'KY' }, { name: 'Louisiana', code: 'LA' },
                { name: 'Maine', code: 'ME' }, { name: 'Maryland', code: 'MD' }, { name: 'Massachusetts', code: 'MA' },
                { name: 'Michigan', code: 'MI' }, { name: 'Minnesota', code: 'MN' }, { name: 'Mississippi', code: 'MS' },
                { name: 'Missouri', code: 'MO' }, { name: 'Montana', code: 'MT' }, { name: 'Nebraska', code: 'NE' },
                { name: 'Nevada', code: 'NV' }, { name: 'New Hampshire', code: 'NH' }, { name: 'New Jersey', code: 'NJ' },
                { name: 'New Mexico', code: 'NM' }, { name: 'New York', code: 'NY' }, { name: 'North Carolina', code: 'NC' },
                { name: 'North Dakota', code: 'ND' }, { name: 'Ohio', code: 'OH' }, { name: 'Oklahoma', code: 'OK' },
                { name: 'Oregon', code: 'OR' }, { name: 'Pennsylvania', code: 'PA' }, { name: 'Rhode Island', code: 'RI' },
                { name: 'South Carolina', code: 'SC' }, { name: 'South Dakota', code: 'SD' }, { name: 'Tennessee', code: 'TN' },
                { name: 'Texas', code: 'TX' }, { name: 'Utah', code: 'UT' }, { name: 'Vermont', code: 'VT' },
                { name: 'Virginia', code: 'VA' }, { name: 'Washington', code: 'WA' }, { name: 'West Virginia', code: 'WV' },
                { name: 'Wisconsin', code: 'WI' }, { name: 'Wyoming', code: 'WY' }
            ],
            ca: [
                { name: 'Ontario', code: 'ON' }, { name: 'Quebec', code: 'QC' }, { name: 'British Columbia', code: 'BC' },
                { name: 'Alberta', code: 'AB' }, { name: 'Manitoba', code: 'MB' }, { name: 'Saskatchewan', code: 'SK' },
                { name: 'Nova Scotia', code: 'NS' }, { name: 'New Brunswick', code: 'NB' }, { name: 'Newfoundland', code: 'NL' },
                { name: 'Prince Edward Island', code: 'PE' }, { name: 'Northwest Territories', code: 'NT' },
                { name: 'Yukon', code: 'YT' }, { name: 'Nunavut', code: 'NU' }
            ],
            au: [
                { name: 'New South Wales', code: 'NSW' }, { name: 'Victoria', code: 'VIC' }, { name: 'Queensland', code: 'QLD' },
                { name: 'Western Australia', code: 'WA' }, { name: 'South Australia', code: 'SA' }, { name: 'Tasmania', code: 'TAS' },
                { name: 'Northern Territory', code: 'NT' }, { name: 'Capital Territory', code: 'ACT' }
            ],
            de: [
                { name: 'Bavaria', code: 'BY' }, { name: 'Baden-W√ºrttemberg', code: 'BW' }, { name: 'Berlin', code: 'BE' },
                { name: 'Brandenburg', code: 'BB' }, { name: 'Bremen', code: 'HB' }, { name: 'Hamburg', code: 'HH' },
                { name: 'Hesse', code: 'HE' }, { name: 'Lower Saxony', code: 'NI' }, { name: 'Mecklenburg-Vorpommern', code: 'MV' },
                { name: 'North Rhine-Westphalia', code: 'NW' }, { name: 'Rhineland-Palatinate', code: 'RP' },
                { name: 'Saarland', code: 'SL' }, { name: 'Saxony', code: 'SN' }, { name: 'Saxony-Anhalt', code: 'ST' },
                { name: 'Schleswig-Holstein', code: 'SH' }, { name: 'Thuringia', code: 'TH' }
            ],
            uk: [
                { name: 'England', code: 'ENG' }, { name: 'Scotland', code: 'SCO' },
                { name: 'Wales', code: 'WAL' }, { name: 'Northern Ireland', code: 'NIR' },
                { name: 'Greater London', code: 'LDN' }, { name: 'South East England', code: 'SE' },
                { name: 'South West England', code: 'SW' }, { name: 'East of England', code: 'EE' },
                { name: 'East Midlands', code: 'EM' }, { name: 'West Midlands', code: 'WM' },
                { name: 'Yorkshire and Humber', code: 'YH' }, { name: 'North West England', code: 'NW' },
                { name: 'North East England', code: 'NE' }
            ]
        };

        let currentCountry = 'us';
        let wheel;
        let advManager;
        let advSettings;

        function renderList() {
            const states = stateData[currentCountry];
            const listEl = document.getElementById('state-list');
            listEl.innerHTML = '';
            states.forEach(function (state) {
                const div = document.createElement('div');
                div.className = 'state-item';
                div.innerHTML = '<input type="checkbox" checked disabled><span class="state-code">' + state.code + '</span><span>' + state.name + '</span>';
                listEl.appendChild(div);
            });
            document.getElementById('state-count').textContent = states.length + ' states';
        }

        function updateWheel() {
            const states = stateData[currentCountry];
            const segments = states.map(function (s) { return { text: s.name, id: s.code }; });
            wheel.updateSegments(segments);
        }

        function showResult(winner) {
            const state = stateData[currentCountry].find(function (s) { return s.name === winner.text; });
            if (!state) return;

            document.getElementById('winner-code').textContent = state.code;
            document.getElementById('winner-text').textContent = state.name;
            document.getElementById('result-modal').classList.add('open');

            advManager.hideManualStopButton();
            advManager.incrementSpinCount();

            if (advSettings.confetti) Utils.triggerConfetti();
            if (advSettings.sound) Utils.playSound('win');
        }

        document.addEventListener('DOMContentLoaded', function () {
            wheel = new PickerWheel('wheel-canvas', {
                onSpinStart: () => {
                    if (advSettings.sound) Utils.playSound('start');
                },
                onSpinEnd: showResult
            });

            // Advanced Settings
            advManager = initAdvancedSettings(wheel, 'state-picker-advanced');
            advSettings = advManager.settings;

            renderList();
            updateWheel();

            document.getElementById('country-select').addEventListener('change', function (e) {
                currentCountry = e.target.value;
                renderList();
                updateWheel();
            });

            document.getElementById('spin-btn').addEventListener('click', function () {
                advManager.showManualStopButton();
                wheel.spin(advSettings.duration * 1000, advSettings.speedLevel);
            });
        });
    </script>
</body>

</html>